<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="`r lifecycle::badge(&quot;experimental&quot;)` At present, the BioFormatsImage
is designed for OME-TIFF from Xenium and has not been tested on other formats
that can be read with BioFormats. The image is not loaded into memory,
and when it is, the the BioFormatsImage object is converted into
ExtImage because the loaded image is of a class that inherits
from Image. The ExtImage class is a thin wrapper
inheriting from VirtualSpatialImage so it's compatible with
SpatialExperiment from which SFE is derived. This class might
drastically change as it matures, say to accommodate other formats supported
by BioFormats and to store the transformation matrix rather than
loading image into memory upon transform."><title>On disk representation of BioFormats images in SFE object — BioFormatsImage • SpatialFeatureExperiment</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="On disk representation of BioFormats images in SFE object — BioFormatsImage"><meta property="og:description" content="`r lifecycle::badge(&quot;experimental&quot;)` At present, the BioFormatsImage
is designed for OME-TIFF from Xenium and has not been tested on other formats
that can be read with BioFormats. The image is not loaded into memory,
and when it is, the the BioFormatsImage object is converted into
ExtImage because the loaded image is of a class that inherits
from Image. The ExtImage class is a thin wrapper
inheriting from VirtualSpatialImage so it's compatible with
SpatialExperiment from which SFE is derived. This class might
drastically change as it matures, say to accommodate other formats supported
by BioFormats and to store the transformation matrix rather than
loading image into memory upon transform."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SpatialFeatureExperiment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.6.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/SFE.html">Introduction to the SpatialFeatureExperiment class</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pachterlab/SpatialFeatureExperiment/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>On disk representation of BioFormats images in SFE object</h1>
      <small class="dont-index">Source: <a href="https://github.com/pachterlab/SpatialFeatureExperiment/blob/HEAD/R/image.R" class="external-link"><code>R/image.R</code></a></small>
      <div class="d-none name"><code>BioFormatsImage.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`r lifecycle::badge("experimental")` At present, the <code>BioFormatsImage</code>
is designed for OME-TIFF from Xenium and has not been tested on other formats
that can be read with <code>BioFormats</code>. The image is not loaded into memory,
and when it is, the the <code>BioFormatsImage</code> object is converted into
<code><a href="ExtImage.html">ExtImage</a></code> because the loaded image is of a class that inherits
from <code>Image</code>. The <code><a href="ExtImage.html">ExtImage</a></code> class is a thin wrapper
inheriting from <code>VirtualSpatialImage</code> so it's compatible with
<code>SpatialExperiment</code> from which SFE is derived. This class might
drastically change as it matures, say to accommodate other formats supported
by <code>BioFormats</code> and to store the transformation matrix rather than
loading image into memory upon transform.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">BioFormatsImage</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  ext <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  isFull <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  transformation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>path</dt>
<dd><p>Path to an OME-TIFF image file.</p></dd>


<dt>ext</dt>
<dd><p>Numeric vector with names "xmin", "xmax", "ymin", "ymax" in
microns indicating the spatial extent covered by the image. If <code>NULL</code>,
then the extent will be inferred from the metadata, from physical pixel
size and the number of pixels.</p></dd>


<dt>isFull</dt>
<dd><p>Logical, if the extent specified in <code>ext</code> is the full
extent. If <code>ext = NULL</code> so it will be inferred from metadata then
<code>isFull = TRUE</code> will be set internally.</p></dd>


<dt>origin</dt>
<dd><p>Origin of the whole image in the x-y plane, defaults to
<code>c(0,0)</code>. This is shifted when the image is translated. This is not
the same as xmin and xmax. For example, when the extent is only part of the
whole image and the whole image itself can be spatially translated, the
origin is needed to determine which part of the whole image this extent
corresponds to.</p></dd>


<dt>transformation</dt>
<dd><p>Named list specifying affine transformation. The list
can have names "name" and named parameter of the transformation, e.g.
<code>list(name = "mirror", direction = "vertical")</code>, "rotate" and degrees = 90
(clockwise), and "scale" and factor = 2. The list can also have names "M"
for a 2x2 linear transformation matrix in the xy plane and "v" for a
translation vector of length 2 to specify general affine transformation.</p></dd>


<dt>object</dt>
<dd><p>A <code>BioFormatsImage</code> object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>BioFormatsImage</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Spatial extent is inferred from OME-TIFF metadata if not specified. Physical
pixel size from the metadata is used to make the extent in micron space. If
physical pixel size is absent from metadata, then the extent will be in pixel
space, which might mean that the image will not align with the geometries
because often the geometry coordinates are in microns, so a warning is issued
in this case.</p>
<p>Affine transformations can be specified in the <code>transformation</code>
argument, either by name or by directly specifying the matrix. The
transformations specified by name will always preserve the center of the
image. When named transformations are chained, name and parameter will be
converted to matrix and translation vector the second time a transformation
is specified. If the subsequent transformation happens to restore the image
to its original place, then transformation specifications will be removed.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>[isFull()], [origin()]</p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lambda Moses, Alik Huseynov, Lior Pachter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

